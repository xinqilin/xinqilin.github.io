<!doctype html><html lang=zh-tw><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Awk - Bill.Lin's Notes</title><meta name=description content="技術筆記與開發心得分享"><link rel=stylesheet href=https://xinqilin.github.io/css/style.min.a91b8e061a8c203e746b8ef3a474886aadf09694603e85dd93de8339a38911c9.css integrity="sha256-qRuOBhqMID50a47zpHSIaq3wlpRgPoXdk96DOaOJEck="><link rel=stylesheet href=https://xinqilin.github.io/css/chroma.min.eb43a1bce3cd013a08124fb3fc84c9d072347d0495cd6739132ef2ac0618998f.css integrity="sha256-60OhvOPNAToIEk+z/ITJ0HI0fQSVzWc5Ey7yrAYYmY8="><link rel=icon type=image/svg+xml href=/images/Bill-coding.svg><link rel=icon type=image/x-icon href=/images/Bill-coding.ico><meta property="og:title" content="Awk"><meta property="og:description" content="技術筆記與開發心得分享"><meta property="og:type" content="article"><meta property="og:url" content="https://xinqilin.github.io/post/tools/awk/"></head><body><div class=container><header class=header><nav class=nav><div class=nav-left><a href=https://xinqilin.github.io/ class=nav-title><img src=/images/Bill-coding.svg alt="Site Icon" class=nav-icon>
Bill.Lin's Notes</a></div><div class=nav-center><a href=https://xinqilin.github.io/ class=avatar-link><div class=avatar-container><div class=avatar-ring></div><img src=/images/Bill-coding.svg alt="Bill's Avatar" class=nav-avatar-center></div></a></div><div class=nav-right><ul class=nav-menu><li class=nav-item><a href=https://xinqilin.github.io/ class=nav-link>Me</a></li><li class=nav-item><a href=/posts/ class="nav-link posts">Posts</a></li><li class=nav-item><a href=/categories/ class="nav-link categories">Categories</a></li></ul></div></nav></header><main class=main-content><article class=post><header class=post-header><h1 class=post-title>Awk</h1><div class=post-meta><div class=post-info><time class=post-date>2019年04月06日</time>
<span class=post-author>by Bill.Lin</span>
<span class=reading-time>2 分鐘閱讀</span></div><div class=post-categories><a href=/categories/tools class=category-link>Tools</a></div></div></header><div class=post-content><h3 id=awk>Awk</h3><blockquote><p>&lsquo;{print}&rsquo; 指令</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    awk <span class=s1>&#39;{print}&#39;</span> fileName
</span></span></code></pre></div><p>&lsquo;$0&rsquo;,&rsquo;$1&rsquo;~&rsquo;$N&rsquo; (N 為欄位數)
$0: 一整行</p><p>example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    ls -l <span class=p>|</span> awk <span class=s1>&#39;{print $3,$9}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqi Applications</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqi Desktop</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqi Documents</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqi Downloads</span>
</span></span></code></pre></div><p>, => 空格</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    ls -l <span class=p>|</span> awk <span class=s1>&#39;{print $3 $9}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqiApplications</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqiDesktop</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqiDocuments</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqiDownloads</span>
</span></span><span class=line><span class=cl>    <span class=c1># linxinqiLibrary</span>
</span></span></code></pre></div><p>自訂格式化輸出, 也可做數學運算</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># awk &#39;{print $1 &#34;\t&#34; $3}&#39; =&gt; 可輸出特殊格式字元</span>
</span></span><span class=line><span class=cl>    ll <span class=p>|</span> awk <span class=s1>&#39;{print &#34;userName: &#34;, $3, &#34;fileName: &#34;, $9}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># userName:  linxinqi fileName:  Applications</span>
</span></span><span class=line><span class=cl>    <span class=c1># userName:  linxinqi fileName:  Desktop</span>
</span></span><span class=line><span class=cl>    <span class=c1># userName:  linxinqi fileName:  Documents</span>
</span></span><span class=line><span class=cl>    <span class=c1># userName:  linxinqi fileName:  Downloads</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    awk <span class=s1>&#39;{print $1 + $2}&#39;</span> -    <span class=c1>#  &#39;-&#39; 叫鍵盤出來</span>
</span></span><span class=line><span class=cl>    <span class=c1># 1 2</span>
</span></span><span class=line><span class=cl>    <span class=c1># 3</span>
</span></span></code></pre></div><p>使用外部 script</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    ls -l <span class=p>|</span> awk -f <span class=o>{</span>sciptFileName<span class=o>}</span>
</span></span></code></pre></div><p>＝＝＝＝＝ advanced ＝＝＝＝＝</p><p>awk &lsquo;BEGIN{statement} {main statement} END{statement}&rsquo;<br>BEGIN, END 執行一次 main 可多次</p><p>String ~ /regex/[actions] => String match regex, then execute actions
String !~ /regex/[actions] => String not match regex, then execute actions
/regex/[actions] file => file match regex, then execute actions
!/regex/[actions] file => file not match regex, then execute actions</p><blockquote><p>&ldquo;NF&rdquo; => Number of Fields
印有幾段</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    awk <span class=s1>&#39;{print NF}&#39;</span>  xxx.txt  
</span></span></code></pre></div><blockquote><p>&ldquo;NR&rdquo; => Number of Records
可用來判斷條件</p></blockquote><p>若是第七行, 則整行印出來</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    awk <span class=s1>&#39;NR == 7{print NR, $0}&#39;</span>
</span></span></code></pre></div><blockquote><p>&ldquo;ARGC&rdquo; => number of arguments
<code>awk 'BEGIN {print "Arguments =", ARGC}' One Two Three Four</code> => Arguments = 5</p></blockquote><blockquote><p>&ldquo;ARGV&rdquo; => input arguments in vector</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    awk <span class=s1>&#39;BEGIN { 
</span></span></span><span class=line><span class=cl><span class=s1>    for (i = 0; i &lt; ARGC - 1; ++i) { 
</span></span></span><span class=line><span class=cl><span class=s1>        printf &#34;ARGV[%d] = %s\n&#34;, i, ARGV[i] 
</span></span></span><span class=line><span class=cl><span class=s1>    } 
</span></span></span><span class=line><span class=cl><span class=s1>    }&#39;</span> one two three four
</span></span></code></pre></div><blockquote><p>正則 /regularExpress/
前綴符合 /^abc/
後綴符合 /abc$/
跳脫 //abc/
跟java 一樣 /a[a-z]{3}c/
^否定pattern /a[^a-z]c/ => abc -> 不合, aBc -> 符合</p><ul><li>=> 可出現次數 0 ~ 無限 /a*b/</li></ul><ul><li>=> 可出現次數 1 ~ 無限 /a+b/
? => 可有可沒有 /a?b/</li></ul></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl>    awk <span class=s1>&#39;/abc/{print $0}&#39;</span> data.txt
</span></span></code></pre></div><blockquote><p>&ldquo;FNR&rdquo; => record number in current file
&ldquo;IGNORECASE&rdquo; => ignore case
&ldquo;OFMT&rdquo; => output format for numbers
&ldquo;RSTART&rdquo; => index of first character matched by match
&ldquo;RLENGTH&rdquo; => match length of string matched by match</p></blockquote><p>reference:
<a href=https://www.hy-star.com.tw/tech/linux/awk/awk.html#awk_basic alt="awk basic" target=_blank>awk basic</a>
<a href=https://www.tutorialspoint.com/awk/awk_built_in_variables.htm alt="awk tutorial" target=_blank>awk tutorial</a></p></div></article><nav class=post-nav><div class=post-nav-links><div class=post-nav-prev><span class=post-nav-label>上一篇</span>
<a href=https://xinqilin.github.io/post/backend/mapcompute/ class=post-nav-link>Java Map 計算方法詳解：putIfAbsent、compute、computeIfAbsent 使用指南</a></div><div class=post-nav-next><span class=post-nav-label>下一篇</span>
<a href=https://xinqilin.github.io/post/backend/springannotation/ class=post-nav-link>Spring Framework 註解完整指南：從基礎到進階應用</a></div></div></nav></main><footer class=footer><div class=footer-content><p>&copy; 2025 Bill Lin. All rights reserved.</p><div class=social-links><a href=https://github.com/xinqilin class=social-link target=_blank rel=noopener>github</a></div></div></footer></div></body></html>